<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Find the mouse by</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
      integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
      crossorigin="anonymous"
    ></script>
  </head>
  <link rel="stylesheet" type="text/css" href="style.css">
  <body>
    <div class="container-fluid">
        <h2>Rama Manoj - Find the mouse by</h2>
    </div>
    <div class="container-fluid d-block">
        <div class="p-2 bg-primary text-white">Click on the bushes to search for the mouse, beware the cat</div>
        <div id="bushes" class="p-2 bg-warning text-white">Number of bushes checked is zero</div>
        <div id="penalty" class="p-2 bg-dark text-white">Penalty is zero</div>
        <div class="p-2 bg-info text-white">Click for help</div>
        <div id="help" class="p-2 bg-danger text-white">Help report</div>
    </div>
    <br>
    <div>
        <button class="btn btn-primary" id="btn-reset" onclick="resetGame()">
            new game
        </button>
      </div>
    </div>
    <br />
    <div class="container">
      <div class="row">
        <div class="col-sm-2"><img id = "id0" onclick="check(0)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id1" onclick="check(1)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id2" onclick="check(2)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id3" onclick="check(3)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id4" onclick="check(4)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id5" onclick="check(5)" src="Bush.jpg"/></div>
    </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-sm-2"><img id = "id6" onclick="check(6)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id7" onclick="check(7)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id8" onclick="check(8)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id9" onclick="check(9)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id10" onclick="check(10)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id11" onclick="check(11)" src="Bush.jpg"/></div>

      </div>
 
    </div>
    <div class="container">
      <div class="row">
        <div class="col-sm-2"><img id = "id12" onclick="check(12)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id13" onclick="check(13)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id14" onclick="check(14)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id15" onclick="check(15)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id16" onclick="check(16)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id17" onclick="check(17)" src="Bush.jpg"/></div>

      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-sm-2"><img id = "id18" onclick="check(18)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id19" onclick="check(19)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id20" onclick="check(20)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id21" onclick="check(21)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id22" onclick="check(22)" src="Bush.jpg"/></div>
        <div class="col-sm-2"><img id = "id23" onclick="check(23)" src="Bush.jpg"/></div>

      </div>
    </div>
  </body>
  <script>
    let imageID = [
      "id0",
      "id1",
      "id2",
      "id3",
      "id4",
      "id5",
      "id6",
      "id7",
      "id8",
      "id9",
      "id10",
      "id11",
      "id12",
      "id13",
      "id14",
      "id15",
      "id16",
      "id17",
      "id18",
      "id19",
      "id20",
      "id21",
      "id22",
      "id23",
    ];
    let checkCount = 0;
    let penalty = 0;
    let lastCheck = 0;
    let mouseLocation = Math.floor(Math.random() * 24);;
    console.log(mouseLocation);
    let catLocation = Math.floor(Math.random() * 24);;
    console.log(catLocation);
    let gameOver = false;
    function check(index) {
      if (gameOver) {
        return;
      } else {
        id = imageID[index];
        img_pos = document.getElementById(id);

        if (index == mouseLocation) {
          img_pos.src = "Mouse.jpg";
          gameOver = true;
          penalty = penalty - 3;
          lastCheck = mouseLocation;
        } else if (index == catLocation) {
          img_pos.src = "cat.jpg";
          gameOver = true;
          penalty = penalty + 4;
          lastCheck = mouseLocation;
        } else {
          img_pos.src = "grass.jpg";
        }
        checkCount++;
        penalty++;
      }
      document.getElementById(
        "bushes"
      ).innerText = `Number of bushes checked is ${checkCount}`;
      document.getElementById("penalty").innerText = `Penalty is ${penalty}`;
      lastCheck = index;
    }

    function help() {
      let catRow = Math.floor(catLocation / 4);
      let catColumn = catLocation % 6;
      let mouseRow = Math.floor(mouseLocation / 4);
      let mouseColumn = mouseLocation % 6;
      let lastRow = Math.floor(lastCheck / 4);
      let lastColumn = lastCheck % 6;
      console.log(
        catRow,
        catColumn,
        mouseRow,
        mouseColumn,
        lastRow,
        lastColumn
      );
      penalty = penalty + 2;
      document.getElementById("penalty").innerHTML = "Penalty is " + penalty;
      if (
        Math.abs(catRow - lastRow) <= 1 &&
        Math.abs(catColumn - lastColumn) <= 1 &&
        (Math.abs(catRow - mouseRow) > 1 ||
          Math.abs(catColumn - mouseColumn) > 1)
      ) {
        document.getElementById("help").innerText = "meow";
      } else if (
        Math.abs(mouseRow - lastRow) <= 1 &&
        Math.abs(mouseColumn - lastColumn) <= 1 &&
        (Math.abs(catRow - mouseRow) > 1 ||
          Math.abs(catColumn - mouseColumn) > 1)
      ) {
        document.getElementById("help").innerText = "squeak";
      } else {
        document.getElementById("help").innerText = "sorry, no help available";
      }
    }

    function resetGame() {
      let mouseLocation = Math.floor(Math.random() * 24);
      console.log("mouse location " + mouseLocation);
      let catLocation = Math.floor(Math.random() * 24);
      console.log("cat location " + catLocation);
      document.getElementById("bushes").innerText =
        "Number of bushes checked is " + 0;
      document.getElementById("penalty").innerText = "Penalty is " + 0;
      for (i = 0; i < 24; i++) {
        if (i == mouseLocation) {
          document.getElementById(imageID[i]).src = "Mouse.jpg";
        } else if (i == catLocation) {
          document.getElementById(imageID[i]).src = "cat.jpg";
        } else {
          document.getElementById(imageID[i]).src = "grass.jpg";
        }
      }
    }
  </script>
</html>